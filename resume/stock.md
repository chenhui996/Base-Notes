## 股票项目解析

### 1. **项目概述与角色**
- **问题**：能简单介绍一下你在这个股票行情项目中扮演的角色和主要贡献吗？
- **准备**：概述你的职责（核心功能开发、性能优化、项目管理），并提及你独立完成技术选型、业务开发并成功上线的经历。
  - 角色：核⼼功能开发 / 性能优化 / 项目管理
  - 贡献：
    - 0 到 1 独立完成项目 技术选型 、 业务开发，并成功上线。
    - 封装业务逻辑为 pipe 函数，提高代码可读性和维护性。
    - 手搓虚拟滚动 -> 优化性能，减少渲染次数、优化数据加载策略等。
    - 使用 gRPC 优化前后端通信，通过 proto 文件自动生成类型定义和接口服务减少沟通成本。
    - 引入 grpc-web-client 和 shared-worker 提高数据传输效率。
    - 实现断线重连机制，确保数据持续更新。
      - onVisibleChange -> 通过监听页面可见性，实现断线重连机制。(重新连接： 快照跟订阅)

### 2. **技术选型与架构**
- **问题**：为什么选择React、gRPC等技术栈？有没有考虑过其他技术，比如Vue或RESTful API？
- **准备**：解释React的组件化优势、gRPC的高效二进制通信以及它在前后端一体化中的便利性。可以提及评估过程，比如性能需求、团队熟悉度等因素影响了最终选择。
  - 技术选型：React、gRPC
  - 原因：
    - React：组件化、虚拟DOM、生态丰富、社区活跃
    - gRPC：高效二进制通信、强类型、自动生成代码、双向通信
      - 高效二进制通信 -> 传输效率高，减少数据传输量，提升性能。
      - 强类型 -> 减少沟通成本，提高开发效率。
      - 自动生成代码 -> 减少手动编写代码，降低出错风险。
      - 双向通信 -> 实时性好，支持服务端推送数据。
        - 与直接使用 websocket 相比，gRPC 提供了更多的功能，如自动生成代码、强类型等。
      - 一体化 -> 前后端统一语言，减少沟通成本，提高开发效率。
        - 统一语言指的是：使用 proto 文件定义接口，前后端都可以根据 proto 文件自动生成代码，减少沟通成本，提高开发效率。
          - 能生成什么代码？ -> 生成接口定义、类型定义、服务端和客户端代码。

### 3. **业务逻辑处理**
- **问题**：你能详细解释一下如何通过FP（函数式编程）概念优化业务逻辑的吗？具体实现上有哪些亮点？
- **准备**：举例说明如何使用函子、pipe、map等概念封装复杂业务逻辑为pipe函数，强调这样做如何提高代码的可读性和维护性。
  - FP（函数式编程）：函子、pipe、map
    - 函子：将业务逻辑封装为函子，提高代码可读性和维护性。
    - pipe：将多个函数组合成一个函数，实现业务逻辑的模块化和复用。
    - map：对数据进行映射处理，提高代码的灵活性和可扩展性。
    - curry：将多参数函数转换为单参数函数，方便函数组合和柯里化。

### 4. **性能优化与自定义Hooks**
- **问题**：在项目中，你是如何识别并解决性能瓶颈的？自定义Hooks带来了哪些好处？
- **准备**：分享性能优化的具体案例，如减少渲染次数、优化数据加载策略等。解释自定义Hooks如何帮助提高代码复用性，使组件更专注于UI逻辑。
  - 性能优化：减少渲染次数、优化数据加载策略
    - 减少渲染次数：手搓虚拟滚动，只渲染可见区域，减少不必要的渲染。
    - 优化数据加载策略：根据用户操作预加载数据，提高用户体验。
  - 性能瓶颈：
    - 全市场个股数量：6000+。渲染成列表 + 接高频推送数据。
    - 解决方案：
      - 虚拟滚动：只渲染可见区域，减少不必要的渲染。
      - 高频推送数据：
        - buffer 流传输数据，减少数据传输量。
        - onChunk -> 通过分块传输数据，减少单次传输数据量，提高性能。
        - 通过 shared-worker 处理数据，减少前端负担，提高交互速度。

### 5. **gRPC与前后端交互**
- **问题**：使用gRPC相比传统的RESTful API有哪些优势？在项目中是如何利用gRPC提升开发效率的？
- **准备**：强调gRPC的强类型、双向通信、低延迟等优势，并说明如何通过proto文件自动生成类型定义和接口服务减少沟通成本。
  - gRPC优势：强类型、双向通信、自动生成代码
    - 强类型：减少沟通成本，提高开发效率。
    - 双向通信：实时性好，支持服务端推送数据。
    - 自动生成代码：减少手动编写代码，降低出错风险。
    - 低延迟：二进制传输，减少数据传输量，提高性能。
  - 开发效率提升：
    - proto文件：定义接口，自动生成代码，减少沟通成本，提高开发效率。
    - gRPC-web-client：在浏览器中支持gRPC，提高数据传输效率。
      - 为什么能提高？
        - 二进制传输，减少数据传输量，提高性能。
        - 自动生成代码，减少手动编写代码，降低出错风险。
        - 双向通信，实时性好，支持服务端推送数据。
    - shared-worker：后台数据处理，减少前端负担，提高交互速度。

- **追问**：gRPC-web-client和shared-worker是如何在你的项目中应用的？它们如何提高数据传输效率？
- **准备**：解释grpc-web-client如何在浏览器中支持gRPC，以及shared-worker如何用于后台数据处理，减少前端负担，提高交互速度。
  - gRPC-web-client：在浏览器中支持gRPC，提高数据传输效率。
    - 为什么能提高？
      - 二进制传输，减少数据传输量，提高性能。
      - 自动生成代码，减少手动编写代码，降低出错风险。
      - 双向通信，实时性好，支持服务端推送数据。
    - 如何应用：
      - 引入grpc-web-client，通过proto文件定义接口，自动生成代码，减少沟通成本，提高开发效率。
      - 通过shared-worker处理数据，减少前端负担，提高交互速度。
  - shared-worker：后台数据处理，减少前端负担，提高交互速度。
    - 为什么能提高？
      - 减少前端负担，提高交互速度。
    - 如何应用：
      - 使用shared-worker处理数据，减少前端负担，提高交互速度。

### 6. **稳定性与错误处理**
- **问题**：项目中如何实现断线重连机制？对于网络不稳定或服务端异常，你是如何处理的？
- **准备**：描述前后端心跳机制的实现原理，以及当检测到连接断开时如何自动尝试重新连接，确保数据持续更新。
  - 断线重连机制：
    - 实现原理：通过心跳机制检测连接状态，当检测到连接断开时自动尝试重新连接。
    - 为什么需要：确保数据持续更新，提高用户体验。
    - 如何实现：
      - onVisibleChange：监听页面可见性，实现断线重连机制。
        - 为什么使用监听页面可见性：当页面不可见时，停止数据更新，减少不必要的请求，提高性能。
        - chrome 不在当前标签页时
          - 定时器会停止，所以当回到当前页时，需要重新启动定时器，并且重新连接。（校准数据
        - 心跳是5s一次，本来只依靠心跳，是可以重连。但是，不能校准数据，所以，必须引入 onVisibleChange。
      - 重新连接：快照跟订阅。
        - 为什么使用快照跟订阅：快照保证数据的完整性，订阅保证数据的实时性。

### 7. **团队协作与项目管理**
- **问题**：在这个项目中，你是如何与团队其他成员协作的？有没有遇到什么挑战，是如何克服的？
- **准备**：分享项目管理的经验，如使用敏捷开发方法、定期会议沟通进度、利用工具（如Jira、Trello）跟踪任务等。提及遇到的挑战及解决方案，体现团队合作能力。
  - 团队协作：
    - 敏捷开发：迭代开发、持续集成、快速反馈。
    - 定期会议：沟通进度、解决问题、协调工作。
    - 工具跟踪：Jira、Trello等，跟踪任务、分配工作、提高效率。
  - 挑战及解决方案：
    - 沟通不畅：定期会议、沟通工具、明确任务分工。
    - 进度延迟：调整工作计划、加班加点、协作解决问题。
    - 任务分配不均：根据成员能力分配任务、培训提升团队整体水平。

### 8. **未来规划与学习**
- **问题**：对于未来，你对这个股票行情项目有什么改进计划或者新技术想尝试的吗？
- **准备**：思考一些可能的改进点，如引入更先进的图表库、优化移动端体验、探索服务端渲染等。同时，表达对新技术的持续学习兴趣，比如学习WebAssembly提升性能、探索新的前端框架等。

准备这些问题时，尽量结合具体实例和数据来支撑你的回答，这样会更加有说服力。同时，也要准备好面对面试官可能根据你的回答提出的进一步深入问题。