# 组件测试

## 先来分析一波;

- 国内现状:
  - 重视程度不足
  - 没有时间
  - 不会测试

> 本质: 只要是人，就会犯错

- 测试作用:
  - 高质量代码
  - 更早发现 Bug, 减少成本
  - 让 '重构' 和 '升级' 变得更加 '容易' 和 '可靠';
  - 让开发流程更加敏捷;

## 测试金字塔

> UI
>
> > Service
> >
> > > Unit

- 大公司最佳实践:
  - 少量的 UI test;
  - 部分的 Service test;
  - 大量的 Unit test;

---

## React 组件特别适合 单元测试

- 为什么？
  - 组件化;
    - 都是一个个独立的单元, 互不影响;
  - 函数型组件;
    - 有了 react hooks 加持:
      - 我们所有的组件都将为 '函数型组件';
        - 即为纯函数;
          - 纯函数是最容易写测试的:
            - 因为有 '固定的输入' 和 '固定的输出';
  - 单向数据流;
    - 组件不会轻易随着外部数据的传入而去改动;
      - 我们只是要去确认:
        - 是否要触发相应的回调即可;

---

## Jest

- facebook 出品的测试框架;
  -  后起之秀;
  -  吸收了几位老前辈的特点;

## 特点

- zero config;(0 配置)
- fast and safe;(快且安全)
- code coverage;(内置代码覆盖率的测试)
  - 命令行: --coverage
- great exceptions;(提供非常简约和直接的错误报告)
- create-react-app 官方默认的测试框架;

## 概念

- 断言:
  - 判断一个输入的 '值', 是否输出相对应的结果;(预期的结果)
  - 有框架提供一定的语法, 帮助我们完成这项工作;

```ts
test("two plus two is four", () => {
  expect(2 + 2).toBe(4);
});
```
