# 浏览器相关（可直接当作面试题）

## Chrome 架构：仅仅打开了 1 个页面，为什么有 4 个进程

- **线程和进程区别：**
  - 多线程可以**并行**处理任务。
  - **线程**不能单独存在，它是由**进程**来启动和管理的。一个**进程**是一个程序的**运行实例**。
- **线程和进程的关系：**
  - 进程中任意一**线程**执行出错，**都会导致整个进程的崩溃**。
  - **线程**之间共享**进程**中的**数据**。
  - 当一个**进程**关闭后，**操作系统**会**回收进程所占用**的**内存**。
  - **进程**之间的**内容**相互**隔离**。
- **单进程浏览器：**
  - 不稳定：
    - 单进程中的**插件、渲染线程**崩溃导致整个**浏览器崩溃**。
  - 不流畅：
    - 脚本（死循环）或插件会使**浏览器卡顿**。
  - 不安全：
    - **插件和脚本**可以获取到**操作系统任意资源**。
- **多进程浏览器：**
  - 解决不稳定：
    - **进程**相互隔离：
      - 一个**页面或者插件**崩溃时 -> 仅影响时当前插件或者页面，不会影响到其他页面。
  - 解决不流畅:
    - **脚本**阻塞**当前页面**渲染进程，不会影响到其他页面。
  - 解决不安全:
    - 采用**多进程架构**使用**沙箱**:
      - **沙箱**看成是**操作系统**给**进程**上了一把锁：
        - **沙箱的程序**可以运行：
          - 但是**不能**在**硬盘**上**写入**任何数据，也**不能**在敏感位置**读取**任何数据。
- **多进程架构：**
  - 分为：
    - 浏览器进程
    - 渲染进程
    - GPU 进程
    - 网络进程
    - 插件进程
  - 缺点：
    - 资源占用高。
    - 体系架构复杂。
- **面向服务架构：**
  - 把原来的各种模块**重构**成：
    - 独立的服务。
  - 每个服务都可以：
    - 在**独立的进程**中运行。
  - **访问服务**必须使用**定义好的接口**
  - 通过 IPC 通讯：
    - 使得系统：
      - 更内聚
      - 松耦合
      - 易维护
      - 拓展

## TCP 协议：如何保证页面文件能被完整送达浏览器
