# Cookie

- 在了解这三个概念之前我们先要了解:
  - HTTP 是无状态的 Web 服务器;
- 什么是无状态呢？
  - 就像'夏洛特烦恼'中经典的一幕对话一样;
    - 一次对话完成后;
    - 下一次对话'完全不知道'上一次对话发生了什么;
  - 如果在 Web 服务器中:
    - 只是用来'管理静态文件'还好说;
    - 对方是谁并不重要;
    - 把'文件'从磁盘中读'取出来发出去'即可;
  - 但是随着网络的不断发展:
    - 比如电商中的购物车:
      - 只有记住了用户的身份;
      - 才能够执行接下来的一系列动作;
- 所以此时就需要:
  - 无状态的服务器记住一些事情;

## 那么 Web 服务器如何记住一些事情呢？

- 既然 Web 服务器记不住东西;
- 那么我们就在外部想办法记住:
  - 相当于服务器给:
    - 每个客户端都贴上了一个小纸条;
  - 上面记录了服务器给我们返回的一些信息;
  - 然后服务器看到这张小纸条就知道我们是谁了;

## 那么 Cookie 是谁产生的呢？

- Cookies 是由服务器产生的;
- 接下来我们描述一下 Cookie 产生的过程:

### 第一步：

- '浏览器'第一次访问'服务端'时:
  - '服务器'此时肯定不知道'他'的身份;
  - 所以创建一个独特的身份标识数据:
    - 放入到 Set-Cookie 字段里;
      - 格式为 key=value;
    - 随着'响应报文'发给浏览器;

### 第二步:

- 浏览器看到有 Set-Cookie 字段以后:
  - 就知道这是'服务器'给的'身份标识';
  - 于是就保存起来;
    - '下次请求'时会自动将:(核心：记住，是下次请求时！！！！)
      - 此 key=value 值放入到 Cookie 字段中;
  - 发给服务端;

### 第三步:

- 服务端收到请求报文后:
  - 发现 Cookie 字段中有值;
  - 就能根据此值:
    - 识别用户的身份然后提供个性化的服务;
