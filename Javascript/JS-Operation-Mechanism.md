# JS 运行机制

- 本文大致分为以下这样的步骤:
  - 来帮助我们'由广入深'更加清晰的了解'JS 运行机制';

---

- 首先我们要了解:
  - '进程'的概念
  - '线程'的概念
- 其次我们要知道:
  - '浏览器'的'进程线程'常识;
- 再然后通过:
  - Event Loop
  - 宏任务(macrotask)
  - 微任务(microtask)
  - 来看浏览器的几个线程间:
    - 是怎样配合的;
- 再然后通过例子来印证我们的猜想;
- 最后提下 NodeJS 的运行机制;

## 面试必问

- JS 运行机制:
  - 在平常前端面试时不管是:
    - '笔试题'还是'面试题'命中率都极高;
- 说到 JS 运行机制，你知道多少;
- 看到这大家可能会说:
  - JS 运行机制嘛，很简单，事件循环、宏微任务那点东西;

---

- 是的，作为一名前端我们都了解;
- 但是如果这真的面试问到了这个地方;
  - 你真的可以答好吗(扪心自问);

### 场景模拟

- 不管你对 JS 了解多少，到这里大家不防先停止一下阅读;

---

- 假设你目前在面试:
  - 面试官让你阐述下'JS 运行机制';
  - 思考下你的答案，用 20 秒的时间(面试时 20s 已经很长了);
  - 然后带着答案再接着往下看:
- 引用的作者(isboyjc)名言：
  **没有思考的阅读纯粹是消磨时间罢了**

### 回过神来

- 也有很多刚开始接触 JS 的同学会被:
  - 任务队列
  - 执行栈
  - 微任务
  - 宏任务
- 这些高大上点的名次搞的很懵;

---

- 接下来，我们来细致的梳理一遍:
  - 你就可以清晰的了解它们了!(这是本文目标)

## 进程与线程

### 什么是进程

- 我们都知道:

  - CPU 是计算机的核心;
  - 承担所有的计算任务;

---

- 官网说法:
  - 进程是 CPU '资源分配'的:
    - 最小单位;
- 字面意思就是:
  - 进行中的程序,我将它理解为:
    - 一个可以独立运行:
      - 且拥有自己的资源空间的'任务程序';

---

- 进程包括:
  - 运行中的程序;
  - 程序所使用到的:
    - 内存
    - 系统资源

---

- CPU 可以有很多进程;
- 我们的电脑每打开一个软件:
  - 就会产生'一个'或'多个'进程;
- 为什么电脑运行的软件多就会卡:
  - 是因为'CPU'给每个'进程':
    - 分配资源空间;
  - 但是一个 CPU 一共就那么多资源;
    - 分出去越多，越卡;
- 每个进程之间是相互独立的;
  - CPU 在运行一个进程时:
    - 其他的进程处于'非运行'状态;

---

- CPU 使用:
  - 时间片轮转调度算法:
    - 来实现同时运行多个进程;

### 什么是线程

- 线程是 CPU'调度'的:
  - 最小单位
- 线程是建立在:
  - 进程的基础上的:
    - 一次程序运行单位;
- 通俗点解释:
  - 线程就是'程序'中的一个'执行流';
  - 一个'进程'可以有'多个线程';

---

- 一个进程中:
  - 只有一个'执行流'称作:
    - 单线程;
- 即程序执行时:
  - 所走的程序路径按照:
    - 连续顺序排下来;
      - 前面的必须处理好，后面的才会执行;

---

- 一个进程中:
  - 有'多个执行流'称作:
    - 多线程;
- 即在一个程序中:
  - 可以同时运行多个不同的线程;
    - 来执行不同的任务;
- 也就是说允许单个程序创建:
  - 多个'并行'执行的线程:
    - 来完成各自的任务;
